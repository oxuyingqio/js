Date.prototype.format=function(a){var c,b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":0==this.getHours()%12?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},Math.subtract=function(a,b,c){var d=parseFloat(a),e=parseFloat(b);return(d-e).toFixed(c)},String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)},String.prototype.toBinaryString=function(){var b,c,d,e,a=[];for(b=0,c=this.length;c>b;b++){for(d=this.charCodeAt(b).toString(2),e=d.length;8>e;e++)a.push(0);a.push(d)}return a.join("")},String.prototype.toHexString=function(){var b,c,d,e,a=[];for(b=0,c=this.length;c>b;b++){for(d=this.charCodeAt(b).toString(16),e=d.length;2>e;e++)a.push(0);a.push(d)}return a.join("")}(function(){if("undefined"!=typeof core)throw"全局变量'core'被占用,请确保'core'未被占用后再进行使用";core={},core.lang={},core.constant={},core.util={},core.event={},core.event.window={},core.event.document={},core.log={},core.log.output={},core.example={}})(),core.lang.Class=function(){},core.lang.Class.extend=function(a,b){if(2!==arguments.length)throw"core.lang.Class:参数异常.参数个数必须为2个,得到"+arguments.length+"个";var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superClass=b.prototype,b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b)},core.lang.Interface=function(a,b){if(2!==arguments.length)throw"core.lang.Interface:构造参数异常.参数个数必须为2个,得到"+arguments.length+"个";this.name=a,this.methods=[];for(var c=0,d=b.length;d>c;c++){if("string"!=typeof b[c])throw"core.lang.Interface:构造参数异常.接口方法名必须为字符串";this.methods.push(b[c])}},core.lang.Interface.ensureImplements=function(a){var b,c,d,e,f,g;if(arguments.length<2)throw"core.lang.Interface.ensureImplements:参数异常.参数个数至少大于等于2.首参数为实现接口的对象,后续参数为实现的接口对象";for(b=1,c=arguments.length;c>b;b++){if(d=arguments[b],!d)throw"core.lang.Interface.ensureImplements:参数异常.传入的接口对象不存在";if(d.constructor!==core.lang.Interface)throw"core.lang.Interface.ensureImplements:参数异常.传入的接口对象必须继承Interface";for(e=0,f=d.methods.length;f>e;e++)if(g=d.methods[e],!a[g]||"function"!=typeof a[g])throw"core.lang.Interface.ensureImplements:对象异常.接口"+d.name+"("+g+")方法未实现"}},core.constant.KeyCode={F1:"112",F2:"113",F3:"114",F4:"115",F5:"116",F6:"117",F7:"118",F8:"119",F9:"120",F10:"121",F11:"122",F12:"123",N0:"48",N1:"49",N2:"50",N3:"51",N4:"52",N5:"53",N6:"54",N7:"55",N8:"56",N9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",A:"65",B:"66",C:"67",D:"68",E:"69",F:"70",G:"71",H:"72",I:"73",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Q:"81",R:"82",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90",Esc:"27",Delete:"46",Backspace:"8",Enter:"13",Shift:"16",Space:"32",Ctrl:"17",Alt:"18",Left:"37",Up:"38",Right:"39",Down:"40"},core.util.Cookie=function(){var a,b=function(){};return b.prototype.get=function(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?b[2]:null},b.prototype.set=function(a,b,c){var d=null===c?7:c,e=new Date;e.setDate(e.getDate()+1e3*60*60*24*d),document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()},b.prototype.del=function(a){var c,b=new Date;b.setTime(b.getTime()-1),c=getCookie(a),null!=c&&(document.cookie=a+"="+c+";expires="+b.toGMTString())},{getCookie:function(){return a||(a=new b),a}}}(),core.util.Map=function(){var a={},b=0;this.size=function(){return b},this.isEmpty=function(){return 0==b},this.containsKey=function(b){return void 0!=a[b]},this.containsValue=function(b){for(key in a)if(a[key]==b)return!0;return!1},this.get=function(b){return a[b]},this.put=function(c,d){this.containsKey(c)||b++,a[c]=d},this.remove=function(b){delete a[b]},this.clear=function(){a={}}},core.event.document.Keydown=[],document.onkeydown=function(a){for(var b=0,c=core.event.document.Keydown.length;c>b;b++)core.event.document.Keydown[b](a)},core.event.window.Resize=[],window.onresize=function(){for(var a=0,b=core.event.window.Resize.length;b>a;a++)core.event.window.Resize[a]()},core.log.Logger=function(){var a,b=function(){this.level=core.log.output.Level.debug,this.mode=core.log.output.Mode.console,this.format="["+core.log.output.Format.level+"] "+core.log.output.Format.msg};return b.prototype.error=function(a){this.level<=core.log.output.Level.error&&(a=core.log.output.FormatConvertor.getConvertor().convert(a,"ERROR",this.format),core.log.output.OutputorCreator.getOutputor(this.mode).output(a))},b.prototype.warn=function(a){this.level<=core.log.output.Level.warn&&(a=core.log.output.FormatConvertor.getConvertor().convert(a,"WARN",this.format),core.log.output.OutputorCreator.getOutputor(this.mode).output(a))},b.prototype.info=function(a){this.level<=core.log.output.Level.info&&(a=core.log.output.FormatConvertor.getConvertor().convert(a,"INFO",this.format),core.log.output.OutputorCreator.getOutputor(this.mode).output(a))},b.prototype.debug=function(a){this.level<=core.log.output.Level.debug&&(a=core.log.output.FormatConvertor.getConvertor().convert(a,"DEBUG",this.format),core.log.output.OutputorCreator.getOutputor(this.mode).output(a))},{getLogger:function(){return a||(a=new b),a}}}(),core.log.output.Console=function(){var a,b=function(){this.output=function(a){console.log(a)}};return{getOutputor:function(){return a||(a=new b),a}}}(),core.log.output.Format={msg:"%m",level:"%p",location:"%l",date:"%d",enter:"%n"},core.log.output.FormatConvertor=function(){var a,b=function(){};return b.prototype.convert=function(a,b,c){return c=c.replaceAll(core.log.output.Format.msg,a),c=c.replaceAll(core.log.output.Format.level,b),c=c.replaceAll(core.log.output.Format.date,(new Date).format("yyyy-MM-dd HH:mm:ss")),c=c.replaceAll(core.log.output.Format.enter,"\n")},{getConvertor:function(){return a||(a=new b),a}}}(),core.log.output.Level={error:4,warn:3,info:2,debug:1},core.log.output.Mode={console:"console",popup:"popup"},core.log.output.OutputorCreator={getOutputor:function(a){var b;switch(a){case core.log.output.Mode.console:b=new core.log.output.Console.getOutputor;case core.log.output.Mode.popup:b=new core.log.output.Popup.getOutputor}return core.lang.Interface.ensureImplements(b,core.log.output.Outputor),b}},core.log.output.Outputor=new core.lang.Interface("core.log.output.Outputor",["output"]),core.log.output.Popup=function(){var a,b=function(){this.output=function(a){alert(a)}};return{getOutputor:function(){return a||(a=new b),a}}}();