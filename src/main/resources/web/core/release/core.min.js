Array.prototype.clear=function(){this.length>0&&this.splice(0,this.length)};Array.prototype.contains=function(object){var index=this.indexOf(object);return(index>=0)};Array.prototype.indexOf=function(object){for(var index=0,length=this.length;index<length;index++){if(this[index]===obj){return index}}return -1};Array.prototype.insert=function(index,object){this.splice(index,0,object)};Array.prototype.remove=function(object){var index=this.indexOf(object);index>=0&&this.splice(index,1)};Array.prototype.removeAt=function(index){this.splice(index,1)};Date.prototype.format=function(format){var data={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12===0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"S":this.getMilliseconds()};if(/(y+)/.test(format)){format=format.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var el in data){if(new RegExp("("+el+")").test(format)){format=format.replace(RegExp.$1,(RegExp.$1.length===1)?(data[el]):(("00"+data[el]).substr((""+data[el]).length)))}}return format};Math.subtract=function(subtrahend,minuend,precision){var a=parseFloat(subtrahend);var b=parseFloat(minuend);return(a-b).toFixed(precision)};Object.clone=function(object){function Clone(){}Clone.prototype=object;return new Clone()};String.prototype.replaceAll=function(target,result){return this.replace(new RegExp(target,"g"),result)};String.prototype.toBinaryString=function(){var rtnStr=[];for(var i=0,length=this.length;i<length;i++){var bs=this.charCodeAt(i).toString(2);for(var j=bs.length;j<8;j++){rtnStr.push(0)}rtnStr.push(bs)}return rtnStr.join("")};String.prototype.toHexString=function(){var rtnStr=[];for(var i=0,length=this.length;i<length;i++){var hs=this.charCodeAt(i).toString(16);for(var j=hs.length;j<2;j++){rtnStr.push(0)}rtnStr.push(hs)}return rtnStr.join("")};(function(){if(typeof(core)!=="undefined"){throw"????'core'???,???'core'??????????"}else{core={html:{constant:{},element:{html5:{viewer:{}},model:{},viewer:{}},event:{document:{},window:{}},util:{}},lang:{},util:{}}
}})();core.lang.Class=function(){};core.lang.Class.extend=function(SubClass,SuperClass){if(arguments.length!==2){new core.lang.Exception("core.lang.Class","extend??????","???????2?,??"+arguments.length+"?")}var Middleware=function(){};Middleware.prototype=SuperClass.prototype;SubClass.prototype=new Middleware();SubClass.prototype.constructor=SubClass;SubClass.superClass=SuperClass.prototype;if(SuperClass.prototype.constructor===Object.prototype.constructor){SuperClass.prototype.constructor=SuperClass}};core.lang.Exception=function(_this){var msg=[];for(var i=1,length=arguments.length;i<length;i++){msg.push(arguments[i]);msg.push(" ")}if(window.console&&window.console.error){window.console.error(msg.join(""))}};core.lang.Interface=function(name,methods){if(arguments.length!==2){new core.lang.Exception("core.lang.Interface","??????","???????2?,??"+arguments.length+"?")}this.name=name;this.methods=[];for(var i=0,length=methods.length;i<length;i++){if(typeof(methods[i])!=="string"){new core.lang.Exception("core.lang.Interface","??????","???????????")}else{this.methods.push(methods[i])}}};core.lang.Interface.ensureImplements=function(object){if(arguments.length<2){new core.lang.Exception("core.lang.Interface","ensureImplements??????","????>=2.???????????,????????????")}for(var i=1,length=arguments.length;i<length;i++){var _interface=arguments[i];if(_interface){if(_interface.constructor!==core.lang.Interface){new core.lang.Exception("core.lang.Interface","ensureImplements??????","??????????core.lang.Interface?")}}else{new core.lang.Exception("core.lang.Interface","ensureImplements??????","??????????")}for(var j=0,jLength=_interface.methods.length;j<jLength;j++){var method=_interface.methods[j];if(!object[method]||typeof(object[method])!=="function"){new core.lang.Exception("core.lang.Interface","ensureImplements??????","??"+_interface.name+"("+method+")?????")}}}};core.util.Map=function(){var elements={};var length=0;this.size=function(){return length};this.isEmpty=function(){return(length===0)
};this.containsKey=function(key){return(elements[key]!==undefined)};this.containsValue=function(value){for(key in elements){if(elements[key]===value){return true}}return false};this.get=function(key){return elements[key]};this.put=function(key,value){!this.containsKey(key)&&length++;elements[key]=value};this.remove=function(key){this.containsKey(key)&&length--;delete elements[key]};this.clear=function(){length=0;elements={}}};core.html.constant.KeyCode={F1:"112",F2:"113",F3:"114",F4:"115",F5:"116",F6:"117",F7:"118",F8:"119",F9:"120",F10:"121",F11:"122",F12:"123",N0:"48",N1:"49",N2:"50",N3:"51",N4:"52",N5:"53",N6:"54",N7:"55",N8:"56",N9:"57",a:"65",b:"66",c:"67",d:"68",e:"69",f:"70",g:"71",h:"72",i:"73",j:"74",k:"75",l:"76",m:"77",n:"78",o:"79",p:"80",q:"81",r:"82",s:"83",t:"84",u:"85",v:"86",w:"87",x:"88",y:"89",z:"90",A:"65",B:"66",C:"67",D:"68",E:"69",F:"70",G:"71",H:"72",I:"73",J:"74",K:"75",L:"76",M:"77",N:"78",O:"79",P:"80",Q:"81",R:"82",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90",Esc:"27",Delete:"46",Backspace:"8",Enter:"13",Shift:"16",Space:"32",Ctrl:"17",Alt:"18",Left:"37",Up:"38",Right:"39",Down:"40"};core.html.element.AbstractElement=(function(){var count=0;var Constructor=function(_id){count++;var id=_id||"coreHtmlElementAbstractElement"+count;var clazz=null;var style=null;var click=null;var children=[];var attributes=new core.util.Map();this.getId=function(){return id};this.setId=function(_id){id=_id;return this};this.getClass=function(){return clazz};this.setClass=function(_clazz){clazz=_clazz;return this};this.getStyle=function(){return style};this.setStyle=function(_style){style=_style;return this};this.setClick=function(_click){click=_click;return this};this.addEvent=function(){if(this.exist()){click===null||$("#"+id).click(click)}return this};this.addChild=function(child){children.push(child);return this};this.removeChild=function(child){children.remove(child);return this};this.getChildren=function(){return children};this.getAttribute=function(key){return attributes.get(key)
};this.setAttribute=function(key,value){attributes.put(key,value);return this}};Constructor.prototype.exist=function(){var $jQuery=$("#"+this.getId());if($jQuery.length===0){return false}else{return true}};Constructor.prototype.dealHtml=function(){this.addEvent();var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);child.dealHtml()}}};Constructor.prototype.show=function(){if(this.exist()){$("#"+this.getId()).show()}else{this.appendTo("body")}return this};Constructor.prototype.hide=function(target){this.exist()&&$("#"+this.getId()).hide();return this};Constructor.prototype.destroy=function(){var children=this.getChildren();for(var i=0,length=chidlren.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);child.destroy()}}this.exist()&&$("#"+this.getId()).remove()};Constructor.prototype.append=function(element){this.addChild(element);if(this.exist()){if(element instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(element,core.html.element.Element,core.html.element.ElementProcess);$("#"+this.getId()).append(element.convertHtml());element.dealHtml()}else{$("#"+this.getId()).append(element)}}return this};Constructor.prototype.appendTo=function(target){if(target instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(target,core.html.element.Element,core.html.element.ElementProcess);target.append(this)}else{if(target.constructor===String){if(this.exist()){$("#"+this.getId()).appendTo(target)}else{$(target).append(this.convertHtml());this.dealHtml()}}}return this};return Constructor})();core.html.element.Element=new core.lang.Interface("core.html.element.Element",["getId","show","hide","destroy","append","appendTo","getAttribute","setAttribute"]);
core.html.element.ElementProcess=new core.lang.Interface("core.html.element.ElementProcess",["exist","convertHtml","dealHtml"]);core.html.element.model.Style=(function(){var count=0;var Constructor=function(){var width=null;var height=null;var color=null;var background=null;this.getWidth=function(){return width};this.setWidth=function(_width){width=_width;return this};this.getHeight=function(){return height};this.setHeight=function(_height){height=_height;return this};this.getColor=function(){return color};this.setColor=function(_color){color=_color;return this};this.getBackground=function(){return background};this.setBackground=function(_background){background=_background;return this}};Constructor.prototype.toString=function(){var str=[];var width=this.getWidth();width==null||str.push("width:"+width+";");var height=this.getHeight();height==null||str.push("height:"+height+";");var color=this.getColor();color==null||str.push("color:"+color+";");var background=this.getBackground();background==null||str.push("background:"+background+";");return str.join("")};return Constructor})();core.html.element.viewer.A=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.A.superClass.constructor.call(this,id||"coreHtmlElementViewerA"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<a ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</a>");return html.join("")};return Constructor
})();core.html.element.viewer.Button=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Button.superClass.constructor.call(this,id||"coreHtmlElementViewerButton"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<button ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</button>");return html.join("")};return Constructor})();core.html.element.viewer.Div=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Div.superClass.constructor.call(this,id||"coreHtmlElementViewerDiv"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<div ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</div>");return html.join("")};return Constructor})();core.html.element.viewer.Fieldset=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Fieldset.superClass.constructor.call(this,id||"coreHtmlElementViewerFieldset"+count)
};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<fieldset ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</fieldset>");return html.join("")};return Constructor})();core.html.element.viewer.Form=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Form.superClass.constructor.call(this,id||"coreHtmlElementViewerForm"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<form ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</form>");return html.join("")};return Constructor})();core.html.element.viewer.Input=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Input.superClass.constructor.call(this,id||"coreHtmlElementViewerInput"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<input ");
html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push("/>");return html.join("")};return Constructor})();core.html.element.viewer.Label=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Label.superClass.constructor.call(this,id||"coreHtmlElementViewerLabel"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<label ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</label>");return html.join("")};return Constructor})();core.html.element.viewer.Legend=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Legend.superClass.constructor.call(this,id||"coreHtmlElementViewerLegend"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<legend ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);
html.push(child.convertHtml())}else{html.push(child)}}html.push("</legend>");return html.join("")};return Constructor})();core.html.element.viewer.Table=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Table.superClass.constructor.call(this,id||"coreHtmlElementViewerTable"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<table ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</table>");return html.join("")};return Constructor})();core.html.element.viewer.Td=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Td.superClass.constructor.call(this,id||"coreHtmlElementViewerTd"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<td ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</td>");return html.join("")};return Constructor})();core.html.element.viewer.Textarea=(function(){var count=0;
var Constructor=function(id){count++;core.html.element.viewer.Textarea.superClass.constructor.call(this,id||"coreHtmlElementViewerTextarea"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<textarea ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</textarea>");return html.join("")};return Constructor})();core.html.element.viewer.Tr=(function(){var count=0;var Constructor=function(id){count++;core.html.element.viewer.Tr.superClass.constructor.call(this,id||"coreHtmlElementViewerTr"+count)};core.lang.Class.extend(Constructor,core.html.element.AbstractElement);Constructor.prototype.convertHtml=function(){var html=[];html.push("<tr ");html.push("id='"+this.getId()+"' ");var clazz=this.getClass();clazz===null||html.push("class='"+clazz+"' ");var style=this.getStyle();style===null||html.push("style='"+style.toString()+"' ");html.push(">");var children=this.getChildren();for(var i=0,length=children.length;i<length;i++){var child=children[i];if(child instanceof core.html.element.AbstractElement){core.lang.Interface.ensureImplements(child,core.html.element.Element,core.html.element.ElementProcess);html.push(child.convertHtml())}else{html.push(child)}}html.push("</tr>");return html.join("")};return Constructor})();core.html.event.document.Keydown=[];document.onkeydown=function(event){for(var i=0,length=core.html.event.document.Keydown.length;i<length;i++){var keydown=core.html.event.document.Keydown[i];typeof(keydown)==="function"&&keydown(event)
}};core.html.event.window.Resize=[];window.onresize=function(){for(var i=0,length=core.html.event.window.Resize.length;i<length;i++){var resize=core.html.event.window.Resize[i];typeof(resize)==="function"&&resize()}};core.html.util.Cookie=(function(){var cookie;var Constructor=function(){};Constructor.prototype.get=function(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=document.cookie.match(reg)){return(arr[2])}else{return null}};Constructor.prototype.set=function(name,value,expiredays){var day=expiredays===undefined?7:expiredays;var exp=new Date();exp.setDate(exp.getDate()+day*24*60*60*1000);document.cookie=name+"="+escape(value)+";expires="+exp.toGMTString()};Constructor.prototype.del=function(name){var exp=new Date();exp.setTime(exp.getTime()-1);var cval=getCookie(name);if(cval!==null){document.cookie=name+"="+cval+";expires="+exp.toGMTString()}};return{getInstance:function(){if(!cookie){cookie=new Constructor()}return cookie}}})();
